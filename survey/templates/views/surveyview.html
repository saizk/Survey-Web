{% extends "base.html" %}

{% block content %}
    
    <!-- <h1>{{current_user.name}} Surveys</h1>
    <div>You have {{num_surveys}} surveys:</div>
    <button><a href="{{ url_for('views.createview') }}">CREATE A SURVEY</a></button>
    
    
    {% if num_surveys == 0 %}
        <div>Do you want to <a href="{{ url_for('views.createview') }}">CREATE</a> a survey?</div>
    {% endif %} -->
    
    
    survey_list = model.Survey.query.filter_by(owner_id = current_user.id).all()
    survey_number = len(survey_list)

    answer_number = {}
    for survey in survey_list:
        answer_number[survey.id] = len(model.SurveyAnswer.query.filter_by(survey_id = survey.id).all())

                
    
    return render_template("views/surveyview.html",  current_user=current_user, survey_number=survey_number, survey_list=survey_list, answer_number = answer_number) 

    

    <h3><span class="blue">&lt;</span>My<span class="blue">&gt;</span> <span class="yellow">Surveys</span></h3>

        <button class="addsurveybutton", onclick= "location.href = '/create-survey';">CREATE A NEW SURVEY</button>

        <h4>You have a total of {{survey_number}} surveys</h4>


        <table class="bigcell">
            <thead>
                <tr>
                    <th class="header"><h1>Surveys</h1></th>
                    <th class="header"><h1>Information</h1></th>
                    
                </tr>
            </thead>
        
        </table>
        
        <!-- {% if questions %}
            <h2>Questions {{questions}}</h2>
        {% endif %} -->

        {% if survey_number > 0 %}
        
            {%for survey in survey_list%}               
                
                {% with %}
                {% set sur_number = loop.index %}
                    <section>
                        {% include 'survey_grid.html' %}
                    </section> 
                
                {% endwith %}

            {%endfor%}

            
    
  
        {% endif %}
    
{% endblock %}